{"version":3,"sources":["components/DownloadItem.js","screens/Downloads.js"],"names":["DownloadItem","torrent","useState","stopping","setStopping","className","style","opacity","lineBreak","marginRight","name","done","redableTimeRemaining","progress","height","width","backgroundColor","status","total","downloaded","speed","disabled","onClick","fetch","magnetURI","e","console","log","href","downloadLink","Downloads","useSWR","then","res","json","refreshInterval","data","error","link","setLink","adding","setAdding","addingError","setAddingError","add","a","preventDefault","indexOf","onSubmit","Input","id","label","placeholder","value","onChange","required","type","torrents","map","key"],"mappings":"sKA8DeA,MA5Df,YAAoC,IAAZC,EAAW,EAAXA,QAAW,EACDC,oBAAS,GADR,mBAC1BC,EAD0B,KAChBC,EADgB,KAajC,OACE,yBAAKC,UAAU,OAAOC,MAAO,CAAEC,QAASJ,EAAW,IAAO,IACxD,yBAAKE,UAAU,4CACb,wBAAIC,MAAO,CAAEE,UAAW,WAAYC,YAAa,QAAUR,EAAQS,MACnE,yBAAKL,UAAU,yBAAyBJ,EAAQU,KAAO,OAAf,UAA2BV,EAAQW,qBAAnC,aAA4DX,EAAQY,SAApE,QAEpB,MAArBZ,EAAQY,UACP,yBACEP,MAAO,CACLQ,OAAQ,MACRC,MAAM,GAAD,OAAKd,EAAQY,SAAb,KACLG,gBAAiB,oBAIvB,yBAAKX,UAAU,qBACb,yBAAKA,UAAU,wBACb,yBAAKA,UAAU,YAAf,YACA,6BAAMJ,EAAQgB,SAEhB,yBAAKZ,UAAU,wBACb,yBAAKA,UAAU,YAAf,UACA,6BAAMJ,EAAQiB,QAEhB,yBAAKb,UAAU,wBACb,yBAAKA,UAAU,YAAf,gBACA,6BAAMJ,EAAQkB,aAEhB,yBAAKd,UAAU,wBACb,yBAAKA,UAAU,YAAf,WACA,6BAAMJ,EAAQmB,SAEdnB,EAAQU,MACR,4BAAQU,SAAUlB,EAAUE,UAAU,aAAaiB,QA3C9C,WACXlB,GAAY,GAEZ,IACEmB,MAAM,+BAAD,OAAgCtB,EAAQuB,YAC7C,MAAOC,GACPC,QAAQC,IAAIF,MAqCR,QAIDxB,EAAQU,MACP,uBAAGiB,KAAM3B,EAAQ4B,aAAcxB,UAAU,eAAzC,WCUKyB,UA1Df,WACE,IADmB,EAEKC,YAAO,wBADf,kBAAaR,MAAK,WAAL,aAAeS,MAAK,SAAAC,GAAG,OAAIA,EAAIC,YACI,CAAEC,gBAAiB,OAA3EC,EAFW,EAEXA,KAAMC,EAFK,EAELA,MAFK,EAGKnC,mBAAS,IAHd,mBAGZoC,EAHY,KAGNC,EAHM,OAISrC,oBAAS,GAJlB,mBAIZsC,EAJY,KAIJC,EAJI,OAKmBvC,mBAAS,IAL5B,mBAKZwC,EALY,KAKCC,EALD,KAObC,EAAG,uCAAG,WAAMnB,GAAN,SAAAoB,EAAA,yDACNpB,GAAGA,EAAEqB,iBACTL,GAAU,GAEsB,IAA5BH,EAAKS,QAAQ,WAJP,gBAKRJ,EAAe,6BALP,8BAORA,EAAe,IAPP,SAQWpB,MAAM,iCAAD,OAAkCe,IARlD,OAUY,MAVZ,OAUCrB,OACPsB,EAAQ,IAERI,EAAe,oBAbT,QAiBVF,GAAU,GAjBA,4CAAH,sDAoBT,OACE,oCACE,yCAEA,0BAAMO,SAAUJ,GACd,kBAACK,EAAA,EAAD,CACEC,GAAG,OACHxC,KAAK,OACLyC,MAAM,cACNC,YAAY,+DACZC,MAAOf,EACPgB,SAAUf,EACVgB,UAAQ,IAEO,KAAhBb,GAAsB,yBAAKrC,UAAU,eAAeqC,GACrD,4BAAQrB,SAAUmB,EAAQnC,UAAS,qBAAgBmC,EAAS,WAAa,IAAMgB,KAAK,UAApF,QAIDnB,GAAS,yBAAKhC,UAAU,oBAAf,0CACT+B,GACC,yBAAK/B,UAAU,sBACZ+B,EAAKqB,SAASC,KAAI,SAAAzD,GAAO,OACxB,kBAAC,EAAD,CAAcA,QAASA,EAAS0D,IAAK1D,EAAQuB","file":"static/js/4.cf6ae25a.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nfunction DownloadItem({ torrent }) {\r\n  const [stopping, setStopping] = useState(false);\r\n\r\n  const stop = () => {\r\n    setStopping(true);\r\n\r\n    try {\r\n      fetch(`/api/v1/torrent/remove?link=${torrent.magnetURI}`);\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"card\" style={{ opacity: stopping ? 0.75 : 1 }}>\r\n      <div className=\"card-header compact d-flex space-between\">\r\n        <h3 style={{ lineBreak: \"anywhere\", marginRight: \"8px\" }}>{torrent.name}</h3>\r\n        <div className=\"text-400 text-primary\">{torrent.done ? \"Done\" : `${torrent.redableTimeRemaining} (${torrent.progress}%)`}</div>\r\n      </div>\r\n      {torrent.progress !== 100 && (\r\n        <div\r\n          style={{\r\n            height: \"4px\",\r\n            width: `${torrent.progress}%`,\r\n            backgroundColor: \"var(--primary)\"\r\n          }}\r\n        />\r\n      )}\r\n      <div className=\"card-body compact\">\r\n        <div className=\"d-flex space-between\">\r\n          <div className=\"text-400\">Status: </div>\r\n          <div>{torrent.status}</div>\r\n        </div>\r\n        <div className=\"d-flex space-between\">\r\n          <div className=\"text-400\">Size: </div>\r\n          <div>{torrent.total}</div>\r\n        </div>\r\n        <div className=\"d-flex space-between\">\r\n          <div className=\"text-400\">Downloaded: </div>\r\n          <div>{torrent.downloaded}</div>\r\n        </div>\r\n        <div className=\"d-flex space-between\">\r\n          <div className=\"text-400\">Speed: </div>\r\n          <div>{torrent.speed}</div>\r\n        </div>\r\n        {!torrent.done && (\r\n          <button disabled={stopping} className=\"btn danger\" onClick={stop}>\r\n            Stop\r\n          </button>\r\n        )}\r\n        {torrent.done && (\r\n          <a href={torrent.downloadLink} className=\"btn success\">\r\n            Open\r\n          </a>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DownloadItem;\r\n","import React, { useState } from \"react\";\r\nimport useSWR from \"swr\";\r\nimport Input from \"../components/Input\";\r\nimport DownloadItem from \"../components/DownloadItem\";\r\n\r\nfunction Downloads() {\r\n  const fetcher = (...args) => fetch(...args).then(res => res.json());\r\n  const { data, error } = useSWR(\"/api/v1/torrent/list\", fetcher, { refreshInterval: 3500 });\r\n  const [link, setLink] = useState(\"\");\r\n  const [adding, setAdding] = useState(false);\r\n  const [addingError, setAddingError] = useState(\"\");\r\n\r\n  const add = async e => {\r\n    if (e) e.preventDefault();\r\n    setAdding(true);\r\n\r\n    if (link.indexOf(\"magnet:\") !== 0) {\r\n      setAddingError(\"Link is not a magnet link\");\r\n    } else {\r\n      setAddingError(\"\");\r\n      const resp = await fetch(`/api/v1/torrent/download?link=${link}`);\r\n\r\n      if (resp.status === 200) {\r\n        setLink(\"\");\r\n      } else {\r\n        setAddingError(\"An error occured\");\r\n      }\r\n    }\r\n\r\n    setAdding(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1>Downloads</h1>\r\n\r\n      <form onSubmit={add}>\r\n        <Input\r\n          id=\"link\"\r\n          name=\"link\"\r\n          label=\"Magnet Link\"\r\n          placeholder=\"magnet:?xt=urn:btih:08ada5a7a6183aae1e09d831df6748d566095a10\"\r\n          value={link}\r\n          onChange={setLink}\r\n          required\r\n        />\r\n        {addingError !== \"\" && <div className=\"text-danger\">{addingError}</div>}\r\n        <button disabled={adding} className={`btn primary${adding ? \" loading\" : \"\"}`} type=\"submit\">\r\n          Add\r\n        </button>\r\n      </form>\r\n      {error && <div className=\"text-danger mt-1\">An error occured. Check your internet.</div>}\r\n      {data && (\r\n        <div className=\"d-flex-column mt-1\">\r\n          {data.torrents.map(torrent => (\r\n            <DownloadItem torrent={torrent} key={torrent.magnetURI} />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Downloads;\r\n"],"sourceRoot":""}